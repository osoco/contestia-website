$(document).ready(function () { const $menu = $(".menu"), $navigations = $(".navigations"), $header = $(".header"), $mainMenuLinks = $(".main-menu a"), $animateElements = $(".animate-element"), $window = $(window), $body = $('body'), $document = $(document); function toggleMenu() { $menu.toggleClass("toggle"); $navigations.toggleClass("toggle"); $header.toggleClass("toggle"); } $menu.click(toggleMenu); $mainMenuLinks.click(function () { $menu.removeClass("toggle"); $navigations.removeClass("toggle"); $header.removeClass("toggle"); }); function smoothScrollTo(target) { $('html, body').stop().animate({ scrollTop: $(target).offset().top }, 500, 'swing', function () { window.location.hash = target; $document.on("scroll", onScroll); }); } $('a[href^="#"]').on('click', function (e) { e.preventDefault(); $document.off("scroll"); $('a').removeClass('active'); $(this).addClass('active'); smoothScrollTo(this.hash); }); $('.js-open-lightbox').on('click', function () { const $lightbox = $('#' + $(this).data('target')); if ($lightbox.length) $lightbox.addClass('open'), $body.addClass('openLB'); }); $('.js-lightbox').on('click', '.js-close-lightbox', function () { $(this).closest('.js-lightbox').removeClass('open'); $body.removeClass('openLB'); }); $('.js-lightbox').on('click', function (e) { if ($(e.target).is('.js-lightbox')) $(this).removeClass('open'), $body.removeClass('openLB'); }); function isElementInViewport(el) { const top = $(el).offset().top, height = $(el).outerHeight(), bottom = top + height, vTop = $window.scrollTop(), vBottom = vTop + $window.height(), threshold = height * 0.10; return bottom - threshold > vTop && top + threshold < vBottom; } function checkVisibility() { $animateElements.each(function () { const $this = $(this); isElementInViewport($this) ? $this.removeClass('oculto').addClass('visible') : $this.removeClass('visible').addClass('oculto'); }); } $window.on('scroll resize', checkVisibility); checkVisibility(); function onScroll() { const scrollPos = $window.scrollTop(); $mainMenuLinks.each(function () { const $currLink = $(this), refElement = $($currLink.attr("href")); if (refElement.length && refElement.position().top <= scrollPos && refElement.position().top + refElement.height() > scrollPos) { $mainMenuLinks.removeClass("active"); $currLink.addClass("active");}});}$document.on("scroll", onScroll);});